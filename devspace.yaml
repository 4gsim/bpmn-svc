version: v1beta9
images:
  app:
    image: 172.18.19.24:5000/devspace
    preferSyncOverRebuild: true
    injectRestartHelper: false
    cmd: ["npm", "run", "dev-verbose"]
    build:
      docker:
        skipPush: true
deployments:
- name: bpmn-svc
  helm:
    componentChart: true
    values:
      containers:
      - image: 172.18.19.24:5000/devspace
      service:
        ports:
        - port: 9229
dev:
  ports:
  - imageName: app
    forward:
    - port: 9230
  # open:
  # - url: http://localhost:9229
  sync:
  - imageName: app
    excludePaths:
    - .git/
    uploadExcludePaths:
    - Dockerfile
    - node_modules/
    - devspace.yaml
    onUpload:
      restartContainer: true
profiles:
- name: production
  patches:
  - op: remove
    path: images.app.injectRestartHelper
